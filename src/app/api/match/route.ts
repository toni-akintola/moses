import { createBackendSupabaseClient } from "@/utils/supabase/server"
import { Candidate, Job } from "../../../../types/types"
import { NextRequest, NextResponse } from "next/server"
import { MatchPayload } from "../../../../types/routes"
import { matchToCandidates, matchToJobs } from "@/app/api/match"

export async function POST(request: NextRequest) {
    const supabase = await createBackendSupabaseClient()
    const payload: MatchPayload = await request.json()
    console.log(payload)
    const embedding = [
        -0.005199046, -0.007539562, 0.015041313, 0.015895847, 0.03796249,
        -0.030657357, -0.018845124, 0.031670697, -0.008280663, 0.0011816014,
        -0.029008787, -0.025545277, 0.029205404, 0.010897201, 0.02394208,
        0.08064382, -0.016742818, 0.025802393, -0.021612907, 0.036026552,
        0.02360934, -0.026619116, 0.04001942, -0.004692375, 0.014481707,
        -0.056656368, -0.0027602208, 0.040503405, 0.0010946356, -0.030248996,
        0.005509098, -0.0360568, 0.00961918, 0.028040819, 0.010715706,
        -0.01765029, 0.055204418, -0.015139623, 0.011177003, -0.021189421,
        -0.019722344, -0.032547917, -0.0073278192, 0.042409092, -0.00037504028,
        0.02619563, -0.030460738, 0.005898554, 0.03641979, 0.058138568,
        0.00881002, 0.013876727, -0.014617827, 0.050152835, -0.03614755,
        -0.02811644, 0.033636883, 0.0019529507, -0.0138918515, 0.032578167,
        -0.026603991, -0.01852751, 0.016682321, 0.061647452, -0.014534642,
        -0.025469653, -0.034756094, 0.014731261, -0.019646723, 0.009664554,
        0.0035731625, 0.026573742, 0.0152228065, 0.01378598, 0.0060838293,
        -0.0089083295, -0.028660923, -0.0056716865, -0.03530058, -0.056444626,
        0.0172873, 0.03850697, -0.022369131, -0.050425075, -0.018512385,
        0.007021548, -0.050757814, -0.060407244, -0.029946506, -0.021038176,
        -0.06636629, -0.0076529956, 0.016289083, 0.0014339915, 0.078465894,
        -0.0070593595, -0.016561326, -0.005021333, 0.011086257, 0.008847831,
        0.0006607515, -0.02680061, 0.042923324, -0.028403807, -0.016228586,
        0.04634146, -0.0010407545, -0.032033686, -0.037750747, -0.004654564,
        -0.1566898, 0.0055544716, -0.0060687046, -0.015638731, -0.04213685,
        0.03560307, -0.037780996, -0.0481564, -0.059832513, -0.040715147,
        -0.014148967, 0.00072361267, 0.007932799, -0.0077323993, -0.008227726,
        0.011577803, 0.02652837, -0.007872301, -0.050213333, -0.04331656,
        -0.03587531, -0.01718143, 0.010292221, -0.008719273, -0.039535437,
        0.020947428, -0.060467742, -0.021749027, -0.035966054, -0.01422459,
        0.00541457, -0.013770855, -0.020448321, 0.0285853, -0.016667197,
        -0.031156465, -0.03699452, 0.04404254, 0.031912692, 0.011623177,
        -0.008560466, 0.0692702, -0.058350313, 0.0021987238, -0.00820504,
        -0.038900208, 0.022943864, 0.035935808, -0.02344297, -0.023669839,
        0.029175157, -0.03708527, -0.038446475, -0.0008677681, -0.011729048,
        -0.028086193, 0.021567533, -0.009679679, -0.024335317, -0.028479429,
        -0.039323695, -0.032941155, -0.032850407, 0.033062153, -0.015079124,
        -0.029023912, 0.009641867, 0.015071562, -0.0057246224, 0.016016843,
        -0.02320098, 0.051695533, -0.040291663, -0.02276237, -0.0693912,
        -0.071266636, 0.020160954, 0.0110484455, 0.030778352, 0.016031967,
        0.01896612, 0.016682321, 0.027042601, 0.005565815, 0.006174576,
        -0.048973124, -0.003709283, -0.07417054, -0.021612907, 0.041229382,
        0.025862891, -0.007630309, -0.0069232387, -0.0036676908, -0.046734698,
        -0.016168088, -0.024894923, 0.0041894857, -0.03130771, -0.054690182,
        0.06309941, -0.002599523, -0.026740111, 0.013407867, -0.0070707025,
        -0.005645219, -0.028600425, -0.050425075, -0.012092036, -0.0691492,
        -0.030097751, 0.05396421, 0.023261478, -0.0466742, 0.0052406383,
        0.003822717, 0.035935808, 0.011373622, 0.029583517, -0.04749092,
        0.0072824457, 0.025636023, -0.005974177, -0.039656434, -0.018376265,
        0.006416568, 0.023851333, 0.014731261, 0.005293574, 0.07749793,
        -0.036571037, -0.022777494, 0.047127936, 0.048640385, 0.041441124,
        0.017362922, -0.014746386, -0.033878874, 0.023382474, 0.020690313,
        -0.0012118503, 0.0060876105, 0.018119149, -0.041985605, -0.031640448,
        0.011305562, 0.0017364814, -0.0031515672, 0.02317073, 0.022853116,
        0.06878622, 0.014118719, 0.0023915612, -0.013007068, -0.060588736,
        -0.011623177, -0.012485273, 0.022414505, 0.0033103744, 0.013029755,
        -0.009687241, 0.03103547, 0.02811644, 0.0012109051, -0.04573648,
        0.016364707, 0.0088402685, 0.023231229, 0.01718143, 0.07011717,
        -0.026074635, 0.028842418, -0.025515027, -0.026044386, -0.022792619,
        -0.004197048, 0.007513094, -0.014859819, 0.019752594, -0.020024834,
        0.0058796485, 0.004526006, 0.055295162, -0.020569317, 0.00026515135,
        -0.0045751603, 0.0021873806, -0.020115582, 0.049789846, -0.02757196,
        0.035935808, 0.010897201, 0.031821944, -0.032336175, -0.018920746,
        0.0075546866, 0.038900208, -0.027829075, 0.05387346, 0.0017941436,
        0.015744602, 0.042620834, 0.004983522, -0.020826433, -0.03784149,
        -0.028343309, 0.031368207, -0.034514103, 0.021673406, -0.048579887,
        0.020463446, 0.014822008, 0.005531785, -0.03796249, -0.030687606,
        0.015941221, 0.038718715, 0.052270263, 0.010140976, -0.037176017,
        -0.028131565, -0.026044386, -0.033092402, 0.040926892, 0.015487486,
        0.013574237, -0.016394956, 0.011812232, 0.0106552085, 0.044193782,
        -0.023957204, -0.05299624, -0.06110297, -0.008711711, 0.0040873955,
        -0.041804112, 0.019087115, 0.001364986, -3.503448e-5, -0.01311294,
        -0.016652072, 0.022883365, -0.018920746, 0.04510125, -0.04540374,
        -0.041804112, 3.6836424e-5, -0.00023383892, -0.021794401, 0.04183436,
        0.025560401, 0.007305132, 0.008121856, -0.027829075, -0.003005994,
        0.010950136, -0.015147184, -0.024289943, 0.0030740541, -0.020145832,
        0.032578167, -0.027859325, 0.058168817, 0.0106325215, -0.018073775,
        -0.010231723, 0.019903839, -0.0011825466, 0.039656434, -0.0048171524,
        0.051544286, 0.052028272, -0.027193846, -0.0016892173, 0.01792253,
        0.021900272, -0.013536425, 0.029734762, 0.0037924678, 0.01762004,
        0.04842864, -0.022943864, 0.019056868, -0.031065717, 0.024728553,
        0.0031288804, 0.026921606, 0.03641979, -0.00013068512, -0.038022988,
        -0.0029833072, 0.027647581, 0.027768578, 0.0361173, 0.0053691966,
        0.017211678, 0.03796249, 0.01954085, 0.020418072, -0.01166855,
        -0.036873527, -0.03696427, 0.025681397, 0.016909188, 0.020644939,
        -0.049820095, 0.029114658, 0.06896771, 0.0052444194, 0.0018650396,
        -0.06745526, 0.010072916, 0.036026552, -0.05541616, 0.0061821383,
        0.039656434, 0.035119083, -0.07017767, -0.022989236, 0.002720519,
        0.0011239392, 0.00756603, -0.006435474, -0.018043526, 0.02202127,
        -0.029326402, 0.02242963, 0.06878622, -0.0118576065, 0.003403012,
        0.009997293, 0.0020418072, -0.01082914, -0.020327324, -0.05211902,
        -0.007694588, 0.016667197, -0.015532859, 0.030793477, 0.02669474,
        0.0019359357, 0.033515885, -0.04597847, 0.04032191, -0.02306486,
        0.02757196, -0.005558253, 0.025832642, -0.021113798, 0.015926097,
        0.009974606, -0.0065489076, -0.0142624015, -0.00541457, -0.0013706576,
        -0.017967904, -0.013052441, -0.009694803, 0.027466089, -0.04670445,
        0.0020947428, 0.011547554, -0.019979462, 0.02844918, 0.023412723,
        0.022596, -0.0014680215, -0.031156465, -0.06113322, -0.028434055,
        -0.0017903624, 0.012719703, -0.042046104, 0.037508756, -0.0058267126,
        0.05208877, -0.008378971, 0.015895847, -0.019041743, 0.045554988,
        0.01896612, -0.006439255, 0.027768578, -0.019979462, 0.032638665,
        0.0391422, 0.007781554, -0.07417054, -0.008152104, -0.0663058,
        0.02374546, -0.009286442, -0.008983952, 0.04404254, 0.039626185,
        -0.031277463, -0.0050024274, 0.002440716, 0.025862891, -0.0010142867,
        0.01775616, 0.0043898853, -0.030082626, -0.042257845, -0.042862825,
        0.0031761446, 0.01684869, 0.017272176, -0.025741896, -0.008000859,
        0.020387823, 0.015305991, -0.014390959, -0.0059401463, 0.0074828453,
        0.00043459298, -0.0240782, -0.006711496, 0.00605358, -0.004352074,
        0.028434055, -0.02152216, 0.030581735, -0.00019472791, -0.016001718,
        -0.008015984, -0.024758803, -0.012780201, -0.0039059015, -0.0076227468,
        0.008794895, 0.048398394, 0.036298793, 0.013596923, 0.001429265,
        0.017695662, 0.02699723, -0.02289849, -0.021446537, 0.019646723,
        0.0134305535, -0.06049799, 0.038718715, -0.011721485, 0.0060497993,
        0.013808667, 0.016168088, -0.011744172, -0.009823361, -0.05057632,
        0.004110082, 0.015253056, 0.058471307, -0.008394096, -0.025378907,
        0.039232947, -0.0089083295, 0.012364277, -0.0180284, 0.0074979695,
        0.00039418222, 0.008560466, -0.03856747, 0.009399875, 0.044193782,
        0.026316626, -0.031337958, -0.00051943195, 0.008462156, -0.01641008,
        -0.023972329, 0.011139193, -0.011373622, 0.031791694, -0.028040819,
        -0.004200829, 0.064914346, 0.011608052, 0.01150218, 0.012848261,
        0.02262625, 0.021779276, 0.034544352, -0.013377618, 0.039777428,
        0.003592068, -0.015260618, -0.024804177, -0.04449627, 0.018603133,
        0.0048171524, -0.023669839, 0.010148538, 0.015926097, -0.006174576,
        -0.01836114, -0.010072916, 0.021234795, -0.005391883, -0.014610264,
        -0.017831782, 0.009188132, -0.017136056, -0.010806453, 0.0017175757,
        0.045192, -0.022006145, 0.005769996, -0.0436493, -0.010950136,
        0.0038057016, -0.018315766, -0.04246959, 0.040563904, 0.02303461,
        0.02669474, 0.013899413, -0.0065148775, -0.033183146, 0.021885147,
        0.0030192279, -0.02663424, 0.018043526, 0.009369627, -0.009097385,
        0.005921241, 0.041955356, -0.0063749757, -0.033909123, -0.005354072,
        -0.0023726556, 0.00433695, 0.008091606, -0.040382408, -0.007165231,
        0.019389605, -0.027450964, -0.029386899, -0.0218549, -0.014126281,
        -0.0011976712, -0.07386804, 0.007025329, -0.0007689862, 0.0038661996,
        -0.00012288654, -0.023579093, -0.03342514, 0.012961694, 0.015714353,
        -0.041350376, 0.038627967, 0.030203622, 0.015986593, -0.00044215523,
        0.029129783, 0.002884998, -0.0075811544, -0.008416783, 0.015011064,
        -0.018164521, 0.039626185, -0.0051309858, 0.0011201581, 0.051907275,
        -0.013279309, -0.010670333, -0.018875374, 0.022550626, -0.029825509,
        -0.009127635, 0.026014136, -0.029870883, 0.011706362, -0.020145832,
        -0.0004776033, 0.059106536, -0.0055053174, 0.0053616343, -0.006291791,
        0.0067871185, 0.03732726, 0.028676048, -0.0031099748, -0.00820504,
        0.01839139, -0.0042613274, -0.004900337, 0.0043067005, -0.043891292,
        -0.039051455, -0.006836273, -0.013521301, -0.030793477, -0.041985605,
        0.015328678, -0.015381614, 0.019828217, 0.050727565, -0.048005156,
        0.0021363352, 0.026377125, -0.03496784, 0.011940791, 0.019026618,
        0.019041743, -0.0047037187, 0.025817517, -0.012462586, -0.0039853053,
        0.016213462, 0.05620263, -0.008295787, -0.026649365, -0.035663564,
        -0.00904445, 0.031549703, -0.010647646, -0.014285088, -0.035996303,
        -0.011358498, -0.025938513, -0.021144047, -0.010768643, 0.0013300105,
        0.022822866, -0.06370439, -0.011479494, -0.023291726, -0.012228156,
        0.0072748833, -0.07344456, -0.011918104, -0.004488195, -0.013710357,
        0.0082731005, -0.0010700582, 0.017710786, -0.03823473, 0.012069349,
        -0.020024834, 0.014920317, -0.018300641, -0.028343309, 0.0028698735,
        -0.001543644, 0.0084924055, -0.010352719, -0.0040911767, 0.015184996,
        0.0034483855, 0.012455024, 0.039807677, 0.014345586, 0.004711281,
        -0.0009812018, 0.05366172, 0.02781395, 0.02245988, 0.00017003244,
        -0.0016542419, -0.02232376, 0.0068551786, -0.020055084, 0.0361173,
        0.006862741, -0.011343373, -0.022853116, 0.017030185, 0.032003436,
        0.045917977, -0.021975895, -0.032759663, -0.019510603, -0.0029587299,
        0.024910048, -0.009067137, 0.020629814, 0.0049343673, -0.038718715,
        -0.0053351666, 0.02680061, -0.033485636, 0.034725845, 0.010602273,
        0.011691237, 0.008227726, -0.079554856, -0.004552474, 0.023972329,
        -0.079615355, -0.033062153, -0.010156101, -0.03342514, 0.008915891,
        -0.004197048, -0.013506176, 0.015956346, -0.025847767, -0.005134767,
        -0.029462522, 0.013778417, -0.020493694, 0.004620534, 0.01082914,
        -0.01731755, 0.014640514, -0.03941444, -0.009157883, -0.047732916,
        0.023760585, -0.021174297, 0.0047264057, -0.010042666, 0.048277397,
        0.017877156, -0.005202827, -0.014648076, 0.0031080842, 0.040866394,
        0.0058607426, 0.015729478, -0.011751735, 0.0012780201, -0.025636023,
        0.020690313, -0.004435259, 0.019041743, -0.044466022, 0.04304432,
        0.03430236, 0.008636088, 0.021870025, -0.030127998, 0.017120931,
        -0.017257052, 0.011245064, 0.017680537, 0.008416783, 0.016757943,
        -0.020402947, -0.0049381484, 0.012697016, -0.030173372, 0.008931016,
        0.06775775, -0.03409062, 0.0067152767, 0.020614691, -0.024970546,
        0.0063560703, 0.02528816, 0.01422459, -0.031398457, 0.038385976,
        -0.0022062862, 0.007411004, -0.00056575076, -0.019298859, -0.033939373,
        -0.030127998, 0.0064581605, -0.0061329836, 0.012303779, -0.0146556385,
        0.0067946804, 0.0017818549, 0.00012985799, -0.01775616, 0.030112876,
        -0.0005085612, -0.01792253, 0.00948306, -0.0039890865, 0.025273036,
        -0.00662453, 0.024168948, 0.042711582, 0.0048776506, 0.0026940512,
        -0.0011863278, -0.030974971, 0.007849614, -0.018164521, -0.0022289727,
        0.0034578382, -0.032003436, 0.026301501, -0.022686746, -0.0018083227,
        0.022716995, -0.011850044, -0.03817423, 0.006023331, 0.007021548,
        0.020206328, -0.018119149, 0.028328184, 0.021733902, 0.017544417,
        0.011539992, -0.009354502, 0.031670697, 0.034423355, 0.0008989623,
        0.01805865, -0.0025579308, -0.003722517, 0.023896707, -0.031428706,
        0.019994587, -0.00864365, 0.057715084, 0.03702477, -0.03433261,
        -0.013763293, -0.03499809, 0.038113736, 0.025273036, -0.008091606,
        -0.010451028, 0.048579887, -0.01751417, 0.028570175, 0.000202172,
        -0.014164092, -0.03251767, 0.011948354, -0.012099599, -0.009082261,
        -0.00019047414, -0.004529787, 0.011517305, 0.019177863, 0.0062199496,
        -0.019087115, -0.010224161, 0.0058115884, -0.0011882184, -0.006023331,
        -0.00017676757, 0.0024879798, 0.02767783, -0.008477281, -0.006291791,
        -0.027042601, 0.042318344, 0.027647581, 0.031791694, 0.0013290652,
        -0.026180506, 0.0014878724, -0.032789912, -0.00068107503, -0.04307457,
        0.014353149, 0.022913614, -0.01657645, -0.007172793, 0.03548207,
        0.016258836, -0.032184932, -0.024063075, -0.02817694, -0.04001942,
        -0.0062539796, -0.0076227468, -0.011192128, 3.7405068e-6, 0.011441682,
        0.015230369, 0.0049986467, 0.018754378, -0.020705437, -0.030506112,
        -0.037145767, -0.00040316238, 0.03372763, 0.009823361, 0.047400177,
        -0.016742818, 0.003567491, -0.015056438, 0.011698799, 0.02754171,
        0.0024860892, -0.028055944, -0.020826433, -0.0039172447, 0.02380596,
        -0.0195711, 0.027768578, 0.023095109, -0.03375788, 0.0043558553,
        0.009142759, -0.00934694, -0.006741745, 0.0010001074, -0.011471932,
        -0.026150256, 0.00046011558, 0.014126281, 0.0037073924, -0.02155241,
        -0.016531076, -0.028040819, -0.021053301, -0.00067445805, -0.028237438,
        0.041622616, -0.0022119577, 0.034756094, -0.011207253, -0.03784149,
        -0.02669474, 0.01610759, -0.022444755, 0.007955486, -0.0021041958,
        -0.021280168, 0.039323695, -0.017166305, 0.01775616, -0.025787268,
        0.025469653, -6.947816e-5, -0.009558682, 0.019087115, 0.026679615,
        -0.0044541648, 0.0051763593, 0.0003450276, 0.032245427, 0.01836114,
        -0.021234795, 0.027738329, -0.009951919, 0.00069619954, 0.028570175,
        -0.024652932, 0.029235654, 0.02121967, 0.06309941, 0.02165828,
        -0.010919888, -0.0034937588, -0.014814446, 0.032457173, 0.058622554,
        -0.0020021053, 0.013438116, 0.0020588222, -0.03399987, 0.024894923,
        0.0029984317, 0.0391422, 0.024305068, -0.010587148, 0.05714035,
        0.0014557329, 0.00055488, 0.02798032, 0.011328248, 0.03850697,
        -0.0034011214, -0.032305926, -0.008817582, -0.0043067005, 0.03672228,
        0.004352074, -0.008893205, -0.020463446, -0.008696586, -0.015449675,
        -0.019011494, -0.05780583, 0.019858465, 0.028055944, 0.0047679977,
        -0.02622588, -0.0069723935, 0.014542204, -0.023972329, 0.025106667,
        0.021597782, 0.005868305, 0.023125356, 0.003890777, 0.014648076,
        0.015442112, -0.011033321, 0.010428341, -0.042015854, -0.01775616,
        -0.030339742, 0.006106516, -0.046522956, 0.0060271122, 0.01731755,
        -0.014421209, -0.014859819, 0.0015852364, 2.1401755e-5, -0.0019019056,
        -0.0042083915, -0.05151404, -0.011018196, 0.0028944507, -0.0064241304,
        -0.010836703, 0.005747309, 0.021597782, 0.013158313, 0.00911251,
        -0.00053928286, -0.011630739, -0.01405822, -0.023715213, -0.0071085137,
        0.04280233, 0.025999011, -0.00857559, -0.026815735, -0.030354867,
        -0.024471438, -0.024637807, 0.004076052, -0.0118576065, -0.025878016,
        0.005906116, -0.024184072, 0.02242963, -0.013521301, -0.006435474,
        0.017907405, -0.024864674, 0.08143029, -0.020418072, -0.01775616,
        -0.0008030163, 0.0029398242, -0.0051120804, -0.011834919, 0.013770855,
        0.010398092, 0.010171224, 0.019631598, 0.006473285, -0.0049381484,
        -0.019374482, 0.00084082753, 0.011986164, -0.017741036, 0.026135132,
        0.0016457344, 0.004764217, 0.017695662, 0.0054523814, 0.031912692,
        -0.00045349862, -0.032789912, 0.0187695, -0.019389605, 0.01718143,
        0.0571706, 0.021401165, -0.029674264, -0.0096721165, 0.039474938,
        0.015253056, -0.012991943, 0.024274819, -0.047400177, -0.026301501,
        0.014277526, -0.0051839217, -0.027087975, 0.0037811245, -0.0056981547,
        -0.0057057166, -0.03883971, 0.0040684897, -0.03560307, -0.014035534,
        -0.010473714, 0.0078798635, -0.005890992, 0.014489269, 0.008704148,
        -0.020569317, -0.040836144, -0.021597782, 0.025968762, 0.015139623,
        0.010299783, 0.03941444, 0.02196077, 0.010791329, 0.019011494,
        0.0285853, 0.032668915, -0.02262625, 0.0070593595, 0.003943713,
        -0.025046168, 0.011040883, -0.0020758372, -0.026982104, -0.01852751,
        0.018905623, -0.0065224394, 0.0056111887, 0.030596858, -0.0019850903,
        0.0032309708, 0.011910542, -0.04401229, -0.026165381, 0.020826433,
        0.014269964, -0.010171224, -0.04612972, -0.02559065, 0.006178357,
        -0.022066642, 0.0017468794, 0.0059174597, -0.031428706, 0.027118225,
        0.0045071, 0.020841558, -0.00205126, -0.0048776506, 0.02875167,
        0.020402947, -0.0056111887, 0.03883971, -0.030944722, 0.0051196422,
        0.020130707, 0.0028793262, -0.0011418996, -0.010473714, -0.0038454034,
        -0.009800674, 0.033485636, 0.005017552, -0.002232754, 0.032880656,
        0.0132566225, 0.02245988, -0.019828217, -0.013173438, -0.0073996605,
        0.013460803, -0.0037849057, 0.035693813, -0.015865598, 0.023231229,
        -0.018920746, 0.024713429, -0.012167659, 0.04455677, 0.016485702,
        -0.0030078844, -0.033092402, 0.017090682, 0.0062464178, 0.018134274,
        0.0187695, 0.009520872, 0.026906481, 0.015343803, -0.029129783,
        -0.019465229, 0.019631598, -0.007237072, -0.016122714, -0.01883,
        0.018315766, 0.017831782, -0.0037584377, 0.011509743, -0.026679615,
        -0.011706362, -0.0038019207, -0.020433197, -0.0061178594, -0.0021193202,
        -0.01069302, -0.0064279116, -0.012046662, 0.018149396, 0.02622588,
        -0.06146596, 0.0142624015, -0.0022592219, 0.0009868735, -0.0076076225,
        0.01819477, 0.0148295695, 0.0041478933, 0.02196077, -0.019797968,
        0.032396674, -0.025908265, -0.0012222484, 0.041592367, 0.02078106,
        0.026649365, 0.0033047027, -0.014330462, 0.0033406233, 0.005898554,
        0.020387823, -0.02242963, -0.032638665, -0.039202698, -0.054901928,
        -0.025696522, -0.029114658, -0.0065753753, 0.02124992, -0.01166855,
        0.033364642, -0.0020493695, -0.0048700883, 0.0071198572, -0.010670333,
        0.003181816, 0.009052012, 0.016228586, 0.012908759, 0.0030853974,
        0.0063031344, 0.01287851, -0.005372978, 0.019419855, -0.015774852,
        -0.0010398092, 0.03672228, 0.016531076, -0.007834489, -0.011865169,
        -0.021885147, -0.0093015665, -0.015547983, 0.042711582, 0.016440328,
        -0.01311294, 0.022112016, -0.014769072, 0.012787763, 0.050394826,
        0.016894063, -0.026951855, 0.023216104, -0.030642232, 0.01762004,
        -0.026603991, 0.0436493, 0.02232376, 0.012674329, 0.00019732743,
        0.023836209, -0.017831782, 0.031156465, 0.00850753, -0.006011988,
        -0.021325542, 0.004314263, 0.0027261907, 0.005622532, 0.029568393,
        -0.020115582, -0.031368207, 0.031761445, 0.021628032, 0.0027564396,
        -0.008068919, -0.013173438, 0.011918104, 0.018240144, -0.024864674,
        0.008900767, 0.042046104, -0.0218549, 0.0034521667, -0.010322469,
        -0.034272112, -0.011887855, -0.026377125, -0.03620805, 0.0043936665,
        -0.02394208, 0.003951275, 0.004760436, -0.03502834, -0.005773777,
        0.00568303, 0.018209895, 0.016939437, 0.032305926, -0.0043029194,
        -0.010791329, 0.0043293876, 0.007388317, -0.024350442, 0.0067908997,
        0.01187273, -0.0021136485, -0.0073278192, -0.006352289, 0.011562678,
        0.0057548713, -0.0116836745, -0.022747245, 0.028055944, -0.008953703,
        -0.031247212, 0.028464304, 0.012122285, -0.036903773, 0.017831782,
        0.0058153695, 0.024940297, -0.010027542, 0.0056943735, -0.007048016,
        0.032124434, -0.011093819, 0.04277208, -0.025938513, 0.021295292,
        0.006983737, 0.015479923, 0.00864365, -0.025394032, 0.030127998,
        -0.02256575, -0.016788192, 0.02374546, -0.01045859, 0.002007777,
        -0.022611124, -0.008711711, -0.018754378, 0.038355727, 0.013498615,
        0.011555117, 0.03847672, 0.0023518594, 0.03533083, -0.01405822,
        0.0047490923, 0.014587578, 0.0065829377, -0.010345156, 0.02124992,
        0.012954133, 0.017741036, 0.012228156, -0.00437098, 0.0138918515,
        0.027148474, -0.0057284036, -0.010647646, -0.01822502, 0.03466535,
        -0.0029341525, 0.0008620964, 0.008333598, 0.018950995, -0.014065783,
        0.022490129, 0.009165445, -0.010753518, 0.017604915, -0.049487356,
        0.020221453, -0.00349754, 0.017695662, 0.029326402, -0.034423355,
        0.026588866, 0.015759727, -0.042711582, 0.022535501, -0.01294657,
        0.035058584, -0.0048776506, 0.017559541, 0.008416783, 0.024047952,
        -0.026452746, 0.025106667, -0.030173372, -0.004469289, -0.009052012,
        0.015986593, -0.026241003, 0.022853116, 0.002340516, -0.008628526,
        -0.008658775, 0.018784625, -0.031277463, -0.021265043, 0.01758979,
        -0.013914538, -0.02196077, 0.0063938815, -0.012870948, -0.0037262982,
        -0.020614691, -0.0010284658, 0.038990956, -0.0060989535, -0.014466582,
        -0.010420779, 0.0047490923, -0.009467935, -0.034483854, -0.010594711,
        -0.03399987,
    ]
    // check to see if the request body includes an embedding
    if (!embedding) return NextResponse.error()
    if (payload.candidate) {
        if (!payload.candidateID) return NextResponse.error()
        const matches = await matchToJobs(embedding)
        console.log(matches)
        return NextResponse.json({ matches })
    }
    if (!payload.jobID) return NextResponse.error()

    const matches = await matchToCandidates(embedding)

    return NextResponse.json({ matches })
}
